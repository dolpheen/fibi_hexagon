<style>
    .flexslider {
        width: 760px;
        margin-left: auto;
        margin-right: auto;
    }

    #slider {
        margin-bottom: 5px;
    }

    #carousel {
        margin-bottom: 0px;
    }

/*
    Calculator
*/
    #calculator .btn-group > .btn {
        line-height: 0.7;
        font-size: 20px;
        background-color: #FFF;
        color: #C13832;
        border: medium none;
    }

    #calculator .btn-group {
        box-shadow: 1px 1px 5px 2px rgba(0, 0, 0, 0.3);
    }

    #rooms {
        color: black;
        opacity: 1;
    }

    #price i {
        font-size: 18px;
    }

    #calculator > h3 {
        background-color: #C13832;
        color: #FFF;
        margin: 0px;
        padding: 10px 40px;
        text-align: right;
    }
    
    #calculator > h3 > span > span {
        font-weight: bold;
    }

    #calculator > h3 > *:last-child {
    }

    .row {
        color: white;
        margin-right: 0px;
        margin-left: 0px;
    }

    .row > div {
        height: 250px;
        padding: 0px;
        overflow: hidden;
    }

    .row input[type=checkbox] {
        display: none;
    }

    .row .background {
        width: 100%; 
        height: 100%; 
        filter: grayscale(100%);
        -webkit-filter: grayscale(100%);
        transition: all 0.7s;
    }
    
    .row > div:hover > .background {
        filter: grayscale(0%);
        -webkit-filter: grayscale(0%);
    } 

    .row input[id]:checked ~ .background {
        filter: grayscale(0%);
        -webkit-filter: grayscale(0%);
    }

    .row > div > img {
        position: absolute;
        left: 60px;
        top: 25px;
        height: 130px;
        width: 130px;
        display: block;
        transition: all 0.5s 0.7s;
    }

    .row input[id]:checked ~ img {
        left: 0px;
        top: 5px;
        height: 50px;
        width: 50px;
        transition: all 0.5s;
    }

    .row h4 {
        position: absolute;
        top: 150px;
        left: 0px;
        width: 250px;
        text-align: center;
        transition: all 0.5s 0.5s;
    }
    
    .row input[id]:checked ~ h4 {
        top: 0px;
        left: 50px;
        width: 200px;
        transition: all 0.5s 0.2s;
    }

    .row .description {
        position: absolute;
        width: 250px;
        height: 150px;
        left: -250px;
        top: 65px;
        padding: 5px;
        transition: all 0.5s;
    }

    .row input[id]:checked ~ .description {
        left: 0px;
        transition: all 0.5s 0.5s;
    }

    #hvac ~ .background,
    #hvac ~ label span { 
        background-color: #2A8FBD; 
    }

    #light ~ .background,
    #light ~ label span { 
        background-color: #F44D27;
    }

    #security ~ .background,
    #security ~ label span {
        background-color: #7FAC1B; 
    }

    #video ~ .background,
    #video ~ label span { 
        background-color: #44AA55;
    }

    #media ~ .background,
    #media ~ label span { 
        background-color: #FBB829;
    }

    #safety ~ .background,
    #safety ~ label span { 
        background-color: #FF0066;
    }

    .row > div > label {
        position: absolute;
        bottom: 0px;
        left: 0px;
        transition: all 0.5s;
        width: 100%;
        white-space: nowrap;
        padding: 10px;
        margin: 0px;
        text-align: center;
        font-size: 20px;
        font-weight: normal;
    }
    
    .row > div > label span {
        padding: 3px 30px;
        border-radius: 5px;
        box-shadow: rgba(0,0,0,0.3) 1px 1px 5px 2px;
        transition: all 0.5s;
        display: inline-block;
        margin: 0px 60px;
        height: 35px;
        overflow: hidden;
        cursor: pointer;
    }

    .row > div > input[id]:checked ~ label {
        color: #EEE;
        left: -290px;
    }

    .row > div > input[id]:checked ~ label span {
        opacity: 0.5;
    }

    .row > div > label span:hover {
        opacity: 1 !important;
    }

/*******************
    Checkbox
*******************/
    .checkbox {
        position: relative;
        font-size: 15px;
        top: -0.375em;
        padding-left: 20px;
        margin: 0 1em 10px 0;
        cursor: pointer;
        font-weight: normal;
        opacity: 0.7;
        transition: all 0.2s;
        line-height: 1;
        text-shadow: none;
    }

    .checkbox::before   {
        position: absolute;
        display: inline-block;
        transition: all 0.3s ease-in-out;
        content: "";
        left: 0;
        z-index: 1;
        width: 1em;
        height: 1em;
        border: 2px solid white;
        border-top-style: none;
        border-right-style: none;
        vertical-align: middle;
        opacity: 0;
    }

    input:checked ~ .checkbox::before {
        transform: rotate(-45deg);
        -webkit-transform: rotate(-45deg);
        transform-origin: right 50%;
        -webkit-transform-origin: right 50%;
        height: .5em;
        width: 1em;
        border-color: white;
        border-top-style: none;
        border-right-style: none;
        opacity: 1; 
    }

    input:checked ~ .checkbox {
       opacity: 1; 
    }

    .checkbox:hover {
        opacity: 1 !important;
    }

    input:checked ~ .checkbox:hover {
        opacity: 0.7 !important;
    }
</style>

<div id="info-title" >
    Решения
</div>
<div id="info-description">
    Хотите, чтобы Ваш дом стал комфортным и безопасным?
</div>

<div id="info-content" >
    <div id="slider" class="flexslider">
        <ul class="slides">
            <li data-thumb="./content/menu/menu-d/images/hc2_thumb.png">
                <iframe width="640" height="360" src="https://www.youtube.com/embed/dKKoxlGsnak?feature=player_detailpage" frameborder="0" allowfullscreen></iframe>
            </li>
            <li data-thumb="./content/menu/menu-d/images/plug_thumb.png">
                <iframe width="640" height="360" src="https://www.youtube.com/embed/82C_yJwLZks?feature=player_detailpage" frameborder="0" allowfullscreen></iframe>
            </li>
            <li data-thumb="./content/menu/menu-d/images/flood_thumb.png">
                <iframe width="640" height="360" src="https://www.youtube.com/embed/qGeQ81i1U0E?feature=player_detailpage" frameborder="0" allowfullscreen></iframe>
            </li>
            <li data-thumb="./content/menu/menu-d/images/motion_thumb.png">
                <iframe width="640" height="360" src="https://www.youtube.com/embed/ck27jTsmHo4?feature=player_detailpage" frameborder="0" allowfullscreen></iframe>
            </li>
            <li data-thumb="./content/menu/menu-d/images/smoke_thumb.png">
                <iframe width="640" height="360" src="https://www.youtube.com/embed/Cb64bsZVLiw?feature=player_detailpage" frameborder="0" allowfullscreen></iframe>
            </li>
        </ul>
    </div>
    <div id="carousel" class="flexslider">
        <ul class="slides">
            <li><img src="./content/menu/menu-d/images/hc2_thumb.png"/></li>
            <li><img src="./content/menu/menu-d/images/plug_thumb.png"/></li>
            <li><img src="./content/menu/menu-d/images/flood_thumb.png"/></li>
            <li><img src="./content/menu/menu-d/images/motion_thumb.png"/></li>
            <li><img src="./content/menu/menu-d/images/smoke_thumb.png"/></li>
        </ul>
    </div>
    <div id="calculator">
        <h2 class="text-center">Нет предела возможностям</h2> 
        <h3><span>Количество комнат</span>
            <div class="btn-group" role="group">
                <button id="btnDec" type="button" class="btn btn-default btn-primary">-</button>
                <button id="rooms"  type="button" class="btn btn-default disabled">2</button>
                <button id="btnInc" type="button" class="btn btn-default btn-primary">+</button>
            </div>
        </h3>
        <h3><span id="price">Выбирете опции</span></h3>
        <div class="row">
            <div class="col-sm-6 col-md-4">
                <input id="hvac" type="checkbox" />
                <div class="background"></div>
                <img src="./content/menu/menu-d/images/thermometer.svg">
                <h4>климат-контроль</h4>
                <div class="description">
                    <div>
                        <input id="hvac-1" type="checkbox" checked/>
                        <label class="checkbox" for="hvac-1">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="управление кондиционерами в каждой комнате">
                                кондиционеры
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="hvac-2" type="checkbox" checked/>
                        <label class="checkbox" for="hvac-2">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="прихожая, ванная и кухня">
                                тёплые полы
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="hvac-3" type="checkbox" checked/>
                        <label class="checkbox" for="hvac-3">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="один радиатор в каждой комнате и кухне">
                                радиаторы отопления водяные/электрические
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="hvac-4" type="checkbox" checked/>
                        <label class="checkbox" for="hvac-4">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="заслонки в каждой комнате и приточный вентилятор">
                                вентиляция
                            </span>
                        </label>
                    </div>
                 </div>
                <label for="hvac"><span>Хочу!</span><span>Нет, спасибо.</span></label>
            </div>
            <div class="col-sm-6 col-md-4">
                <input id="light" type="checkbox" />
                <div class="background"></div>
                <img src="./content/menu/menu-d/images/bulb-on.svg">
                <h4>управление освещением</h4>
                <div class="description">
                    <div>
                        <input id="light-1" type="checkbox" checked/>
                        <label class="checkbox" for="light-1">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="прихожая, ванная, туалет, кухня">
                                включение света по движению
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="light-2" type="checkbox" checked/>
                        <label class="checkbox" for="light-2">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="комнаты, прихожая, ванная, туалет, кухня">
                            регулировка яркости
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="light-3" type="checkbox" checked/>
                        <label class="checkbox" for="light-3">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="кухня и комнаты">
                                светодиодная подсветка
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="light-4" type="checkbox" checked/>
                        <label class="checkbox" for="light-4">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="включить/выключить весь свет, включение/выключение по расписанию, регулировка яркости в зависимости от времени суток, световая индикация событий: звонок в дверь, новый e-mail или входящий вызов на телефон">
                                световые сцены
                            </span>
                        </label>
                    </div>
                </div>
                <label for="light"><span>Хочу!</span><span>Нет, спасибо.</span></label>
            </div>
            <div class="col-sm-6 col-md-4">
                <input id="security" type="checkbox" />
                <div class="background"></div>
                <img src="./content/menu/menu-d/images/guard.svg">
                <h4>контроль доступа</h4>
                <div class="description">
                    <div>
                        <input id="security-1" type="checkbox" checked/>
                        <label class="checkbox" for="security-1">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0" 
                                  data-content="видео-панель">
                                видео-домофон - отвечайте Вашим гостям даже если Вас нет дома
                            </span>
                        </label>
                    </div>
                     <div>
                        <input id="security-2" type="checkbox" checked/>
                        <label class="checkbox" for="security-2">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0" 
                                  data-content="идентификация по отпечатку пальца">
                                биометрический доступ
                            </span>
                        </label>
                    </div>
                     <div>
                        <input id="security-3" type="checkbox" checked/>
                        <label class="checkbox" for="security-3">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="входная дверь, окна в комнатах и на кухне">
                                контроль дверей/окон, движения
                            </span>
                        </label>
                    </div>
                </div>
                <label for="security"><span>Хочу!</span><span>Нет, спасибо.</span></label>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6 col-md-4">
                <input id="video" type="checkbox" />
                <div class="background"></div>
                <img src="./content/menu/menu-d/images/camera.svg">
                <h4>видео-наблюдение</h4>
                <div class="description">
                     <div>
                        <input id="video-1" type="checkbox" checked/>
                        <label class="checkbox" for="video-1">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="">
                                многофункциональные видеокамеры
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="video-2" type="checkbox" checked/>
                        <label class="checkbox" for="video-2">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="">
                                видео-архив
                            </span>
                        </label>
                    </div>
                 </div>
                <label for="video"><span>Хочу!</span><span>Нет, спасибо.</span></label>
            </div>
            <div class="col-sm-6 col-md-4">
                <input id="media" type="checkbox" />
                <div class="background"></div>
                <img src="./content/menu/menu-d/images/multimedia.svg">
                <h4>мультимедиа</h4>
                <div class="description">
                    <div>
                        <input id="media-1" type="checkbox" checked/>
                        <label class="checkbox" for="media-1">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="в каждой комнате">
                                управление аудио/видео оборудованием
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="media-2" type="checkbox" checked/>
                        <label class="checkbox" for="media-2">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="один пульт">
                                универсальный пульт управления мультимедиа и домашними системами
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="media-3" type="checkbox" checked/>
                        <label class="checkbox" for="media-3">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="">
                                медиацентр   
                            </span>
                        </label>
                    </div>
                 </div>
                <label for="media"><span>Хочу!</span><span>Нет, спасибо.</span></label>
            </div>
            <div class="col-sm-6 col-md-4">
                <input id="safety" type="checkbox" />
                <div class="background"></div>
                <img src="./content/menu/menu-d/images/drops.svg">
                <h4>Безопасность</h4>
                <div class="description">
                     <div>
                        <input id="safety-1" type="checkbox" checked/>
                        <label class="checkbox" for="safety-1">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="два датчика протечки и два кран">
                                защита от протечки
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="safety-2" type="checkbox" checked/>
                        <label class="checkbox" for="safety-2">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="датчики в комнатах и кухне">
                                датчики задымления
                            </span>
                        </label>
                    </div>
                    <div>
                        <input id="safety-3" type="checkbox" checked/>
                        <label class="checkbox" for="safety-3">
                            <span class="tag" data-toggle="popover" role="button" tabindex="0"
                                  data-content="">
                                интеграция с охранной или противопожарной системой
                            </span>
                        </label>
                    </div>
                </div>
                <label for="safety"><span>Хочу!</span><span>Нет, спасибо.</span></label>
            </div>
        </div>
    </div>
</div>

<script src="./content/menu/menu-d/js/jquery.fitvids.js"></script>
<script>
$('#carousel').flexslider({
    animation: "slide",
    controlNav: false,
    animationLoop: false,
    slideshow: false,
    itemWidth: 210,
    itemMargin: 5,
    asNavFor: '#slider'
});

$('#slider')
    .fitVids()
    .flexslider({
        animation: "slide",
        controlNav: false,
        animationLoop: false,
        slideshow: false,
        sync: "#carousel"
});

/********************
    Price Calculator
*********************/

function calcPrice() {
    // Installation cost factor
    f = 1.2;
    // list of functions for calculation option price based on number of rooms selected
    var formulas = { 
        hvac1:     function(r) { return r*7350*f; },
        hvac2:     function(r) { return 3*6850*f; },
        hvac3:     function(r) { return (r+1)*9000*f; },
        hvac4:     function(r) { return (r+1)*4300*f; },

        light1:    function(r) { return 4*(4300+4960)*f; },
        light2:    function(r) { return r*4300*f; },
        light3:    function(r) { return (r+1)*4640*f; },
        light4:    function(r) { return 4300*f+6000; },

        security1: function(r) { return 19000*f; },
        security2: function(r) { return 15000*f; },
        security3: function(r) { return (4960+4260+(r+1)*4260)*f; },

        video1:    function(r) { return 20000; },
        video2:    function(r) { return 1200*f; },

        media1:    function(r) { return r*7350*f; },
        media2:    function(r) { return 11000*f; },
        media3:    function(r) { return 23000*f; },

        safety1:  function(r) { return (2*4990+4300+6000)*f; },
        safety2:  function(r) { return (r+1)*5700*f; },
        safety3:  function(r) { return 2900*f; },
    }

    // Get array of the selected options
    var opts = [];
    $('#calculator > div > div > input:checked').each(function(i, el) {
        $('[id^="' + el.id +  '-"]:checked').each(function(i, el) {
            opts.push(el.id.replace('-',''));
        });
    });

    // calculate total price
    var sum = 0;
    var rooms = parseInt(roomsEl.textContent);
    opts.forEach(function(opt) { sum += formulas[opt](rooms); });

    sum = Math.floor(sum / 1000);
    priceEl.innerHTML = sum == 0 ? "Выбирете опции" : 'Установка под ключ за <span>' + sum + ' тыс.</span>' + '<i class="fa fa-fw fa-rub"></i>';
}

var roomsEl = $("#rooms")[0];
var priceEl = $("#price")[0];

// Setup increment/decrement rooms buttom
$('#btnDec').click(function(){
    var rooms = parseInt(roomsEl.textContent);
    if (rooms == 1) return;
        roomsEl.textContent = rooms - 1;
    calcPrice();
});

$('#btnInc').click(function(){
    var rooms = parseInt(roomsEl.textContent);
    roomsEl.textContent = rooms + 1;
    calcPrice();
});

// recalculate price on input fields change
$('#calculator > .row > div').change(calcPrice);

$(function () {
    $('[data-toggle="popover"]').popover({
        container: 'body',
        trigger: 'click hover focus'
    });
})
</script>
